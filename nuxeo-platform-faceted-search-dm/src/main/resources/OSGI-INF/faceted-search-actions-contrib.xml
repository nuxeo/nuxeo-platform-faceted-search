<?xml version="1.0"?>
<component name="org.nuxeo.ecm.platform.faceted.search.dm.actions">

  <require>org.nuxeo.ecm.platform.actions</require>
  <require>org.nuxeo.ecm.platform.notifications.web.actions</require>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="actions">

    <!-- Search actions -->

    <action id="facetedSaveSearchAction" link="#{facetedSearchActions.saveSearch()}"
      label="command.save" order="10">
    </action>

    <!-- Saved searches -->
    <action id="FacetedSavedSearches" link="/incl/faceted_saved_searches.xhtml"
      type="home_rest_document_link" label="label.home.faceted.saved.searches"
      order="0">
      <category>SavedSearches_sub_tab</category>
      <filter-id>not_readonly</filter-id>
    </action>

    <action id="facetedSearchCurrentSelectionDelete"
      link="#{deleteActions.purgeSelection('FACETED_SAVED_SEARCHES_CURRENT_SELECTION')}"
      label="command.trashDocs" icon="" help="comand.deleteDocs.help"
      confirm="if( !confirmDeleteDocumentsForever() ) return false;">
      <category>FACETED_SAVED_SEARCHES_CURRENT_SELECTION_LIST</category>
      <filter id="canDeleteFacetedSavedSearches">
        <rule grant="true">
          <condition>#{deleteActions.getCanDelete('FACETED_SAVED_SEARCHES_CURRENT_SELECTION')}</condition>
        </rule>
      </filter>
    </action>

    <action id="TAB_MY_SUBSCRIPTIONS">
      <filter-id>denyForFacetedSearch</filter-id>
    </action>

    <action id="TAB_MANAGE_SUBSCRIPTIONS">
      <filter-id>denyForFacetedSearch</filter-id>
    </action>

    <action id="TAB_RELATIONS">
      <filter-id>denyForFacetedSearch</filter-id>
    </action>

  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="filters">

    <filter id="rights" append="true">
      <rule grant="true">
        <facet>FacetedSearch</facet>
      </rule>
    </filter>

    <filter id="denyForFacetedSearch">
      <rule grant="false">
        <facet>FacetedSearch</facet>
      </rule>
    </filter>

  </extension>

</component>
