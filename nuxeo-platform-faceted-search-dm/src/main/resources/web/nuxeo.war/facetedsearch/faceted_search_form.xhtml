<div xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:nxl="http://nuxeo.org/nxforms/layout">

<h:form id="facetedSearchForm">

  <nxu:set var="contentViewName"
    value="#{facetedSearchActions.currentContentViewName}">

    <div style="display:none;">
      <h:commandButton action="faceted_search_results">
        <nxu:actionListenerMethod
          value="#{contentViewActions.refreshAndRewind(contentViewName)}" />
      </h:commandButton>
    </div>

    <nxu:set var="contentView"
      value="#{contentViewActions.getContentViewWithProvider(contentViewName)}"
      cache="true">
      <c:if test="#{contentView != null}">
        <nxl:layout name="#{contentView.searchLayout.name}" mode="search"
          value="#{contentView.searchDocumentModel}" />
      </c:if>
    </nxu:set>

  </nxu:set>
</h:form>

</div>
