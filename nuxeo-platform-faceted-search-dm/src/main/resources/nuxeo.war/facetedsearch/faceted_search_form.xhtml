<div xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:nxu="http://nuxeo.org/nxweb/util"
     xmlns:c="http://java.sun.com/jstl/core"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:nxl="http://nuxeo.org/nxforms/layout">

  <h:form id="facetedSearchForm">

    <nxu:set var="contentViewName" value="#{facetedSearchActions.currentContentViewName}">
    <ui:include src="/facetedsearch/faceted_search_actions_bar.xhtml">
      <ui:param name="contentViewName"
                value="#{contentViewName}"/>
    </ui:include>


    <nxu:set var="contentView"
             value="#{contentViewActions.getContentViewWithProvider(contentViewName, null)}"
             cache="true">
      <c:if test="#{contentView != null}">

        <nxl:layout name="#{contentView.searchLayout.name}" mode="faceted_search"
                    value="#{contentView.searchDocumentModel}"/>
      </c:if>
    </nxu:set>

    <ui:include src="/facetedsearch/faceted_search_actions_bar.xhtml">
      <ui:param name="contentViewName"
                value="#{contentViewName}"/>
    </ui:include>
    </nxu:set>
  </h:form>

</div>
