<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="selenium.base" href="http://localhost:8080/nuxeo"/>
  <title>saveSearch</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr>
  <td rowspan="1" colspan="3">saveSearch</td>
</tr>
</thead>
<tbody>
<tr>
  <td>open</td>
  <td>restAPI/systemLog?token=dolog&amp;level=INFO&amp;message=----- Selenium
    saveSearch
  </td>
  <td></td>
</tr>
<tr>
  <td>open</td>
  <td>logout</td>
  <td></td>
</tr>
<tr>
  <td>type</td>
  <td>username</td>
  <td>Administrator</td>
</tr>
<tr>
  <td>type</td>
  <td>password</td>
  <td>Administrator</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>Submit</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>You are logged as Administrator</td>
  <td></td>
</tr>
<tr>
  <td>watchA4jRequests</td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>click</td>
  <td>//a[@id='virtualNavTreeTab:virtualNavTreeList:1:virtualNavTreeLink']/img
  </td>
  <td></td>
</tr>
<tr>
  <td>waitForA4jRequest</td>
  <td>10000</td>
  <td></td>
</tr>

<tr>
  <td>waitForTextPresent</td>
  <td>Keywords</td>
  <td></td>
</tr>
<tr>
  <td>type</td>
  <td>
    facetedSearchForm:nxl_faceted_search_default:nxw_text_search:nxw_ecm_fulltext_1
  </td>
  <td>Sections</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>//input[@value="Go Â»"]</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Default Faceted Search</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Sections</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Workspaces</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Templates</td>
  <td></td>
</tr>
<!-- save the search -->
<tr>
  <td>type</td>
  <td>saveFacetedSearchForm:savedSearchTitle</td>
  <td>My search</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>//input[@value='Save']</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Your search has been saved in your personal workspace</td>
  <td></td>
</tr>

<tr>
  <td>clickAndWait</td>
  <td>link=Clear</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Sections</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Workspaces</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Templates</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Saved searches</td>
  <td></td>
</tr>
<!-- load the search -->
<tr>
  <td>selectAndWait</td>
  <td>//select[@id="facetedSearchForm:nxl_faceted_search_default:savedFacetedSearchSelector"]
  </td>
  <td>label=My search</td>
</tr>
<tr>
  <td>verifyValue</td>
  <td>
    //*[@id='facetedSearchForm:nxl_faceted_search_default:nxw_text_search:nxw_ecm_fulltext_1']
  </td>
  <td>Sections</td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Sections</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Workspaces</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Templates</td>
  <td></td>
</tr>

<!-- check that the search is in our user workspace, and remove it -->
<tr>
  <td>clickAndWait</td>
  <td>link=Personal Workspace</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Saved searches</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=Saved Searches</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>My search</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=My search</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Keywords</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Sections</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=Administrator</td>
  <td></td>
</tr>
<tr>
  <td>click</td>
  <td>//*[@title=&quot;Select all / deselect all&quot;]</td>
  <td></td>
</tr>
<tr>
  <td>waitForEditable</td>
  <td>//span[@id=&quot;CURRENT_SELECTION_TRASH&quot;]/input</td>
  <td>12000</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>//input[@value=&quot;Delete&quot;]</td>
  <td></td>
</tr>
<tr>
  <td>assertConfirmation</td>
  <td>Delete selected document(s)?</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=Manage</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=Trash</td>
  <td></td>
</tr>
<tr>
  <td>click</td>
  <td>//*[@title=&quot;Select all / deselect all&quot;]</td>
  <td></td>
</tr>
<tr>
  <td>waitForEditable</td>
  <td>//span[@id=&quot;CURRENT_SELECTION_DELETE&quot;]/input</td>
  <td>12000</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>//input[@value=&quot;Permanent delete&quot;]</td>
  <td></td>
</tr>
<tr>
  <td>assertConfirmation</td>
  <td>Permanently delete selected document(s)?</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>This folder contains no document.</td>
  <td></td>
</tr>

</tbody>
</table>
</body>
</html>
