<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="selenium.base" href="http://localhost:8080/nuxeo/"/>
  <title>saveSearch</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr>
  <td rowspan="1" colspan="3">saveSearch</td>
</tr>
</thead>
<tbody>
<tr>
  <td>setTimeout</td>
  <td>120000</td>
  <td></td>
</tr>
<tr>
  <td>open</td>
  <td>restAPI/systemLog?token=dolog&amp;level=INFO&amp;message=----- Selenium saveSearch</td>
  <td></td>
</tr>
<tr>
  <td>open</td>
  <td>logout</td>
  <td></td>
</tr>
<tr>
  <td>type</td>
  <td>username</td>
  <td>Administrator</td>
</tr>
<tr>
  <td>type</td>
  <td>password</td>
  <td>Administrator</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>Submit</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Administrator</td>
  <td></td>
</tr>
<tr>
  <td>watchA4jRequests</td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td>click</td>
  <td>//a[@id='virtualNavTreeTab:virtualNavTreeList:1:virtualNavTreeLink']/img</td>
  <td></td>
</tr>
<tr>
  <td>waitForA4jRequest</td>
  <td>10000</td>
  <td></td>
</tr>
<tr>
  <td>waitForTextPresent</td>
  <td>Keywords</td>
  <td></td>
</tr>
<tr>
  <td>type</td>
  <td>id=facetedSearchForm:nxl_faceted_search_default:nxw_ecm_fulltext</td>
  <td>Klaatu</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>//input[@value=&quot;Filter&quot;]</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Default search</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Klaatu</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Barada</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Nikto</td>
  <td></td>
</tr>
<!-- save the search -->
<tr>
  <td>type</td>
  <td>id=facetedSearchSaveForm:nxw_saveContentView_1</td>
  <td>My search</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>//input[@id='facetedSearchSaveForm:nxw_saveContentView_action_facetedSaveSearchAction']</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Your search has been saved</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=Clear</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Klaatu</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Barada</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Nikto</td>
  <td></td>
</tr>
<tr>
  <td>verifyElementPresent</td>
  <td>//select[@id='facetedSearchSelectorForm:nxl_faceted_search_default_selectors:allSavedFacetedSearchSelector']/optgroup[1]</td>
  <td></td>
</tr>
<tr>
  <td>verifyAttribute</td>
  <td>//select[@id='facetedSearchSelectorForm:nxl_faceted_search_default_selectors:allSavedFacetedSearchSelector']/optgroup[1]@label</td>
  <td>Saved searches</td>
</tr>
<!-- load the search -->
<tr>
  <td>selectAndWait</td>
  <td>id=facetedSearchSelectorForm:nxl_faceted_search_default_selectors:allSavedFacetedSearchSelector</td>
  <td>label=My search</td>
</tr>
<tr>
  <td>verifyValue</td>
  <td>id=facetedSearchForm:nxl_faceted_search_default:nxw_ecm_fulltext</td>
  <td>Klaatu</td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Klaatu</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Barada</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextNotPresent</td>
  <td>Nikto</td>
  <td></td>
</tr>
<!-- check that the search is in our user workspace, and remove it -->
<tr>
  <td>clickAndWait</td>
  <td>link=Personal Workspace</td>
  <td></td>
</tr>
<tr>
  <td>verifyElementPresent</td>
  <td>//select[@id='facetedSearchSelectorForm:nxl_faceted_search_default_selectors:allSavedFacetedSearchSelector']/optgroup[1]</td>
  <td></td>
</tr>
<tr>
  <td>verifyAttribute</td>
  <td>//select[@id='facetedSearchSelectorForm:nxl_faceted_search_default_selectors:allSavedFacetedSearchSelector']/optgroup[1]@label</td>
  <td>Saved searches</td>
</tr>
<tr>
  <td>selectAndWait</td>
  <td>id=facetedSearchSelectorForm:nxl_faceted_search_default_selectors:allSavedFacetedSearchSelector</td>
  <td>None</td>
</tr>
<tr>
  <td>selectAndWait</td>
  <td>id=facetedSearchSelectorForm:nxl_faceted_search_default_selectors:allSavedFacetedSearchSelector</td>
  <td>My search</td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Keywords</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>Klaatu</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=Home</td>
  <td></td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>link=Saved searches</td>
  <td></td>
</tr>
<tr>
  <td>click</td>
  <td>//*[@title=&quot;Select all / deselect all&quot;]</td>
  <td></td>
</tr>
<tr>
  <td>waitForEditable</td>
  <td>id=faceted_saved_searches_buttons:nxw_facetedSearchCurrentSelectionDelete_form:nxw_facetedSearchCurrentSelectionDelete</td>
  <td>12000</td>
</tr>
<tr>
  <td>clickAndWait</td>
  <td>//input[@value=&quot;Delete&quot;]</td>
  <td></td>
</tr>
<tr>
  <td>assertConfirmation</td>
  <td>Permanently delete selected document(s)?</td>
  <td></td>
</tr>
<tr>
  <td>verifyTextPresent</td>
  <td>This folder contains no document.</td>
  <td></td>
</tr>
</tbody>
</table>
</body>
</html>
