<f:subview xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  id="#{widget.id}">
<c:if test="false">
 deprecated since 5.6
</c:if>

<div class="#{widget.properties.styleClass}">

  <h5 class="widgetTitle">
    <h:outputText value="#{messages[widget.label]}" />
  </h5>

  <div class="widgetContent">

    <table class="dataInput">
      <tbody>
        <nxl:subWidget>
          <c:set var="wrapperMode"
            value="#{nxu:test(!empty widget.properties.wrapperMode, widget.properties.wrapperMode, 'column')}" />
          <tr>
            <c:if test="#{wrapperMode == 'column'}">
              <c:choose>
                <c:when test="#{widget.translated}">
                  <td class="labelColumn">
                    <c:if test="#{!empty widget.helpLabel}">
                      <h:outputText
                        value="#{messages[widget.label]}"
                        title="#{messages[widget.helpLabel]}"
                        class="facetedSearchWrapperTooltip" />
                    </c:if>
                    <c:if test="#{empty widget.helpLabel}">
                      <span>
                        <h:outputText value="#{messages[widget.label]}" />
                      </span>
                    </c:if>
                  </td>
                </c:when>
                <c:otherwise>
                  <td class="labelColumn">
                    <c:if test="#{!empty widget.helpLabel}">
                      <h:outputText
                        value="#{widget.label}"
                        title="#{widget.helpLabel}"
                        class="facetedSearchWrapperTooltip" />
                    </c:if>
                    <c:if test="#{empty widget.helpLabel}">
                      <span>
                        <h:outputText value="#{widget.label}" />
                      </span>
                    </c:if>
                  </td>
                </c:otherwise>
              </c:choose>
              <td>
                <nxl:widget widget="#{widget}" value="#{value}" />
              </td>
            </c:if>
            <c:if test="#{wrapperMode == 'row'}">
              <td colspan="2">
                <c:choose>
                  <c:when test="#{widget.translated}">
                    <div>
                      <span class="labelOpenPopUp">
                        <c:if test="#{!empty widget.helpLabel}">
                          <h:outputText
                            value="#{messages[widget.label]}"
                            title="#{messages[widget.helpLabel]}"
                            class="facetedSearchWrapperTooltip" />
                        </c:if>
                        <c:if test="#{empty widget.helpLabel}">
                          <span>
                            <h:outputText value="#{messages[widget.label]}" />
                          </span>
                        </c:if>
                      </span>
                    </div>
                  </c:when>
                  <c:otherwise>
                    <div>
                    <span class="labelOpenPopUp">
                      <c:if test="#{!empty widget.helpLabel}">
                        <h:outputText
                          value="#{widget.label}"
                          title="#{widget.helpLabel}"
                          class="facetedSearchWrapperTooltip" />
                      </c:if>
                      <c:if test="#{empty widget.helpLabel}">
                        <span>
                          <h:outputText value="#{widget.label}" />
                        </span>
                      </c:if>
                    </span>
                    </div>
                  </c:otherwise>
                </c:choose>
                <div>
                  <nxl:widget widget="#{widget}" value="#{value}" />
                </div>
              </td>
            </c:if>
            <c:if test="#{wrapperMode == 'noLabel'}">
              <td colspan="2">
                <div>
                  <nxl:widget widget="#{widget}" value="#{value}" />
                </div>
              </td>
            </c:if>
          </tr>
        </nxl:subWidget>
      </tbody>
    </table>

  </div>
</div>

<script>
  jQuery(document).ready(function() {
    jQuery("span.facetedSearchWrapperTooltip[title]").tooltip();
  });
</script>

</f:subview>
